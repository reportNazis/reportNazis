<aside
    class="h-full flex flex-col py-4 bg-gray-950 border-r border-gray-800 z-50 transition-all duration-300 ease-in-out overflow-visible"
    [ngClass]="isExpanded() ? 'w-64 px-4' : 'w-16 items-center'">

    <!-- Logo / Brand Icon -->
    <div class="mb-5 flex items-center gap-3 px-2 overflow-hidden whitespace-nowrap text-white">
        <div class="p-1.5 rounded-lg bg-white text-black shrink-0 shadow-sm">
            <mat-icon class="!flex items-center justify-center !w-4 !h-4 !text-[18px]">bolt</mat-icon>
        </div>
        <span class="font-bold text-lg tracking-tight transition-opacity duration-300" [class.opacity-0]="!isExpanded()"
            [class.opacity-100]="isExpanded()">
            Electricity Maps
        </span>
    </div>

    <!-- Nav Items -->
    <nav class="flex-1 flex flex-col w-full gap-0.5 overflow-visible">
        @for (button of topButtons(); track button.id) {
        <app-sidebar-button [config]="button" [isExpanded]="isExpanded()"></app-sidebar-button>
        }
    </nav>

    <!-- Bottom Actions -->
    <div class="flex flex-col gap-0.5 mb-2 w-full overflow-visible">
        @for (button of bottomButtons(); track button.id) {
        <app-sidebar-button [config]="button" [isExpanded]="isExpanded()"></app-sidebar-button>
        }

        <!-- Toggle Button -->
        <button (click)="toggleSidebar()"
            class="p-2.5 rounded-xl transition-all text-gray-400 hover:text-white hover:bg-gray-800 flex items-center justify-center w-full mt-1">
            <mat-icon class="transition-transform duration-300" [class.rotate-180]="isExpanded()">
                last_page
            </mat-icon>
        </button>
    </div>

</aside>