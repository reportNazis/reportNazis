"use strict";(self.webpackChunkfrontend_user=self.webpackChunkfrontend_user||[]).push([[19],{2019(Rr,It,c){c.d(It,{MunichMapComponent:()=>Or});var a=c(375),p=c(9769),o=c(5547);const Rt=["*"];function Nt(t,n){if(1&t){const e=o.RV6();o.j41(0,"div",1)(1,"div",2),o.bIt("click",function(){a.eBV(e);const i=o.XpG();return a.Njj(i.handleBackdropClick())}),o.k0s(),o.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"h3",6),o.EFF(6),o.k0s(),o.j41(7,"button",7),o.bIt("click",function(){a.eBV(e);const i=o.XpG();return a.Njj(i.close.emit())}),o.j41(8,"span",8),o.EFF(9,"Close"),o.k0s(),a.qSk(),o.j41(10,"svg",9),o.nrm(11,"path",10),o.k0s()()(),a.joV(),o.j41(12,"div",11),o.SdG(13),o.k0s()()()()}if(2&t){const e=o.XpG();o.R7$(2),o.xc7("max-width",e.config.width||"32rem"),o.R7$(4),o.SpI(" ",e.title," ")}}let Tt=(()=>{class t{constructor(){this.isVisible=!1,this.title="Modal",this.config={width:"32rem",closeOnBackdropClick:!0},this.close=new a.bkB}handleBackdropClick(){!1!==this.config.closeOnBackdropClick&&this.close.emit()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-modal"]],inputs:{isVisible:"isVisible",title:"title",config:"config"},outputs:{close:"close"},ngContentSelectors:Rt,decls:1,vars:1,consts:[["class","fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none animate-fadeIn",4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-x-hidden","overflow-y-auto","outline-none","focus:outline-none","animate-fadeIn"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","transition-opacity",3,"click"],[1,"relative","mx-auto","my-6","z-50","w-full","animate-scaleIn"],[1,"border-0","rounded-2xl","shadow-2xl","relative","flex","flex-col","w-full","bg-gray-800","border","border-gray-700","outline-none","focus:outline-none","overflow-hidden"],[1,"flex","items-center","justify-between","p-5","border-b","border-gray-700"],[1,"text-xl","font-bold","text-white"],[1,"p-2","ml-auto","text-gray-400","hover:text-white","bg-transparent","hover:bg-white/5","rounded-full","transition-colors","outline-none","focus:outline-none",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"relative","p-6","flex-auto","text-gray-300"]],template:function(r,i){1&r&&(o.NAR(),o.DNE(0,Nt,14,3,"div",0)),2&r&&o.Y8G("ngIf",i.isVisible)},dependencies:[p.MD,p.bT],encapsulation:2})}}return t})();var D=c(7017),Me=(c(7705),c(6494)),Bt=c(6648),jt=c(1985),Gt=c(3073),Ut=c(8750),Pt=c(3794),K=c(4360),Ht=c(6450),Lt=c(8496),zt=c(1413),Xt=c(6354);let Ae=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||t)(o.rXU(o.sFG),o.rXU(o.aKT))};static \u0275dir=o.FsC({type:t})}return t})(),b=(()=>{class t extends Ae{static \u0275fac=(()=>{let e;return function(i){return(e||(e=o.xGo(t)))(i||t)}})();static \u0275dir=o.FsC({type:t,features:[o.Vt3]})}return t})();const m=new a.nKC(""),qt={provide:m,useExisting:(0,a.Rfq)(()=>N),multi:!0},Zt=new a.nKC("");let N=(()=>{class t extends Ae{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function Jt(){const t=(0,Me.rb)()?(0,Me.rb)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||t)(o.rXU(o.sFG),o.rXU(o.aKT),o.rXU(Zt,8))};static \u0275dir=o.FsC({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&o.bIt("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},standalone:!1,features:[o.Jv_([qt]),o.Vt3]})}return t})();const h=new a.nKC(""),_=new a.nKC("");function Ne(t){return null!=t}function Te(t){return(0,o.yLl)(t)?(0,Bt.H)(t):t}function Be(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function je(t,n){return n.map(e=>e(t))}function Ge(t){return t.map(n=>function Kt(t){return!t.validate}(n)?n:e=>n.validate(e))}function te(t){return null!=t?function Ue(t){if(!t)return null;const n=t.filter(Ne);return 0==n.length?null:function(e){return Be(je(e,n))}}(Ge(t)):null}function ne(t){return null!=t?function Pe(t){if(!t)return null;const n=t.filter(Ne);return 0==n.length?null:function(e){return function $t(...t){const n=(0,Pt.ms)(t),{args:e,keys:r}=(0,Gt.D)(t),i=new jt.c(s=>{const{length:l}=e;if(!l)return void s.complete();const u=new Array(l);let g=l,d=l;for(let v=0;v<l;v++){let we=!1;(0,Ut.Tg)(e[v]).subscribe((0,K._)(s,Ir=>{we||(we=!0,d--),u[v]=Ir},()=>g--,void 0,()=>{(!g||!we)&&(d||s.next(r?(0,Lt.e)(r,u):u),s.complete())}))}});return n?i.pipe((0,Ht.I)(n)):i}(je(e,n).map(Te)).pipe((0,Xt.T)(Be))}}(Ge(t)):null}function He(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function Le(t){return t._rawValidators}function $e(t){return t._rawAsyncValidators}function re(t){return t?Array.isArray(t)?t:[t]:[]}function B(t,n){return Array.isArray(t)?t.includes(n):t===n}function ze(t,n){const e=re(n);return re(t).forEach(i=>{B(e,i)||e.push(i)}),e}function Xe(t,n){return re(n).filter(e=>!B(t,e))}class We{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=te(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=ne(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class y extends We{_parent=null;name=null;valueAccessor=null}class qe{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Je=(()=>{class t extends qe{constructor(e){super(e)}static \u0275fac=function(r){return new(r||t)(o.rXU(y,2))};static \u0275dir=o.FsC({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&o.AVh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[o.Vt3]})}return t})();const x="VALID",G="INVALID",w="PENDING",E="DISABLED";class M{}class Ye extends M{value;source;constructor(n,e){super(),this.value=n,this.source=e}}class se extends M{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}}class ae extends M{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}}class U extends M{status;source;constructor(n,e){super(),this.status=n,this.source=e}}class le extends M{source;constructor(n){super(),this.source=n}}function P(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class de{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return(0,a.O8t)(this.statusReactive)}set status(n){(0,a.O8t)(()=>this.statusReactive.set(n))}_status=(0,D.EW)(()=>this.statusReactive());statusReactive=(0,a.vPA)(void 0);get valid(){return this.status===x}get invalid(){return this.status===G}get pending(){return this.status==w}get disabled(){return this.status===E}get enabled(){return this.status!==E}errors;get pristine(){return(0,a.O8t)(this.pristineReactive)}set pristine(n){(0,a.O8t)(()=>this.pristineReactive.set(n))}_pristine=(0,D.EW)(()=>this.pristineReactive());pristineReactive=(0,a.vPA)(!0);get dirty(){return!this.pristine}get touched(){return(0,a.O8t)(this.touchedReactive)}set touched(n){(0,a.O8t)(()=>this.touchedReactive.set(n))}_touched=(0,D.EW)(()=>this.touchedReactive());touchedReactive=(0,a.vPA)(!1);get untouched(){return!this.touched}_events=new zt.B;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(ze(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(ze(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Xe(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Xe(n,this._rawAsyncValidators))}hasValidator(n){return B(this._rawValidators,n)}hasAsyncValidator(n){return B(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const e=!1===this.touched;this.touched=!0;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:r}),e&&!1!==n.emitEvent&&this._events.next(new ae(!0,r))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){const e=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),e&&!1!==n.emitEvent&&this._events.next(new ae(!1,r))}markAsDirty(n={}){const e=!0===this.pristine;this.pristine=!1;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:r}),e&&!1!==n.emitEvent&&this._events.next(new se(!1,r))}markAsPristine(n={}){const e=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),e&&!1!==n.emitEvent&&this._events.next(new se(!0,r))}markAsPending(n={}){this.status=w;const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new U(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:e})}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=E,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue();const r=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Ye(this.value,r)),this._events.next(new U(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=x,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===x||this.status===w)&&this._runAsyncValidator(r,n.emitEvent)}const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Ye(this.value,e)),this._events.next(new U(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:e})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?E:x}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=w,this._hasOwnPendingAsyncValidator={emitEvent:!1!==e,shouldHaveEmitted:!1!==n};const r=Te(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent,this,e.shouldHaveEmitted)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new U(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,r)}_initObservables(){this.valueChanges=new a.bkB,this.statusChanges=new a.bkB}_calculateStatus(){return this._allControlsDisabled()?E:this.errors?G:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(w)?w:this._anyControlsHaveStatus(G)?G:x}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),i&&this._events.next(new se(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new ae(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){P(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function an(t){return Array.isArray(t)?te(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function ln(t){return Array.isArray(t)?ne(t):t||null}(this._rawAsyncValidators)}}const C=new a.nKC("",{factory:()=>k}),k="always";function S(t,n,e=k){(function fe(t,n){const e=Le(t);null!==n.validator?t.setValidators(He(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=$e(t);null!==n.asyncValidator?t.setAsyncValidators(He(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();$(n._rawValidators,i),$(n._rawAsyncValidators,i)})(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function dn(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&tt(t,n)})}(t,n),function fn(t,n){const e=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function hn(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&tt(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function cn(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function L(t,n,e=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),function z(t,n){let e=!1;if(null!==t){if(null!==n.validator){const i=Le(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==n.validator);s.length!==i.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const i=$e(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==n.asyncValidator);s.length!==i.length&&(e=!0,t.setAsyncValidators(s))}}}const r=()=>{};return $(n._rawValidators,r),$(n._rawAsyncValidators,r),e}(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function $(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function tt(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ot(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function it(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const ve=class extends de{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,r){super(function ue(t){return(P(t)?t.validators:t)||null}(e),function ce(t,n){return(P(n)?n.asyncValidators:t)||null}(r,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),P(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=it(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,!1!==e?.emitEvent&&this._events.next(new le(this))}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){ot(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){ot(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){it(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};Promise.resolve();const _e=new a.nKC(""),Sn={provide:y,useExisting:(0,a.Rfq)(()=>ye)};let ye=(()=>{class t extends y{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new a.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,s,l){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=l,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=function me(t,n){if(!n)return null;let e,r,i;return Array.isArray(n),n.forEach(s=>{s.constructor===N?e=s:function mn(t){return Object.getPrototypeOf(t.constructor)===b}(s)?r=s:i=s}),i||r||e||null}(0,i)}ngOnChanges(e){if(this._isControlChanged(e)){const r=e.form.previousValue;r&&L(r,this,!1),S(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function ge(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)})(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&L(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||t)(o.rXU(h,10),o.rXU(_,10),o.rXU(m,10),o.rXU(_e,8),o.rXU(C,8))};static \u0275dir=o.FsC({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[o.Jv_([Sn]),o.Vt3,o.OA$]})}return t})(),Dt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=o.$C({type:t});static \u0275inj=a.G2t({})}return t})(),Zn=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:C,useValue:e.callSetDisabledState??k}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=o.$C({type:t});static \u0275inj=a.G2t({imports:[Dt]})}return t})(),Yn=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:_e,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:C,useValue:e.callSetDisabledState??k}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=o.$C({type:t});static \u0275inj=a.G2t({imports:[Dt]})}return t})();var A=c(7673);let Ft=(()=>{class t{constructor(){}getMunichMapData(){return(0,A.of)('\n      <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">\n        \x3c!-- 80331: City Center (Altstadt) --\x3e\n        <path id="zip-80331" d="M350,250 L450,250 L450,350 L350,350 Z" \n              fill="#e5e7eb" stroke="#374151" stroke-width="2" class="cursor-pointer hover:opacity-80 transition-opacity"/>\n        \n        \x3c!-- 80469: Isarvorstadt (Below Center) --\x3e\n        <path id="zip-80469" d="M350,350 L450,350 L420,450 L380,450 Z" \n              fill="#e5e7eb" stroke="#374151" stroke-width="2" class="cursor-pointer hover:opacity-80 transition-opacity"/>\n        \n        \x3c!-- 80333: Maxvorstadt (Above Center) --\x3e\n        <path id="zip-80333" d="M350,250 L350,180 L450,180 L450,250 Z" \n              fill="#e5e7eb" stroke="#374151" stroke-width="2" class="cursor-pointer hover:opacity-80 transition-opacity"/>\n        \n        \x3c!-- 80538: Lehel (Right of Center) --\x3e\n        <path id="zip-80538" d="M450,250 L520,230 L520,350 L450,350 Z" \n              fill="#e5e7eb" stroke="#374151" stroke-width="2" class="cursor-pointer hover:opacity-80 transition-opacity"/>\n\n         \x3c!-- 80335: Ludwigsvorstadt (Left of Center) --\x3e\n        <path id="zip-80335" d="M350,250 L280,280 L280,350 L350,350 Z" \n              fill="#e5e7eb" stroke="#374151" stroke-width="2" class="cursor-pointer hover:opacity-80 transition-opacity"/>\n      </svg>\n    ')}getPollutionData(){return(0,A.of)([{zipCode:"80331",score:25},{zipCode:"80469",score:55},{zipCode:"80333",score:85},{zipCode:"80538",score:10},{zipCode:"80335",score:null}])}getPollutionDataByTime(e,r,i){const l=[{zipCode:"80331",score:25},{zipCode:"80469",score:55},{zipCode:"80333",score:85},{zipCode:"80538",score:10},{zipCode:"80335",score:null}].map(u=>{if(null!==u.score){const g=Math.floor(41*Math.random())-20;let d=u.score+g;return d=Math.max(0,Math.min(100,d)),{...u,score:d}}return u});return(0,A.of)(l)}searchLocations(e){if(!e.trim())return(0,A.of)([]);const i=[{name:"Vereinigte Arabische Emirate",code:"AE",emoji:"\u{1f1e6}\u{1f1ea}"},{name:"Afghanistan",code:"AF",emoji:"\u{1f1e6}\u{1f1eb}"},{name:"Antigua und Barbuda",code:"AG",emoji:"\u{1f1e6}\u{1f1ec}"},{name:"Angola",code:"AO",emoji:"\u{1f1e6}\u{1f1f4}"},{name:"Argentinien",code:"AR",emoji:"\u{1f1e6}\u{1f1f7}"},{name:"Bosnien und Herzegowina",code:"BA",emoji:"\u{1f1e7}\u{1f1e6}"},{name:"Bangladesch",code:"BD",emoji:"\u{1f1e7}\u{1f1e9}"},{name:"Belgien",code:"BE",emoji:"\u{1f1e7}\u{1f1ea}"},{name:"Brasilien",code:"BR",emoji:"\u{1f1e7}\u{1f1f7}"},{name:"Deutschland",code:"DE",emoji:"\u{1f1e9}\u{1f1ea}"},{name:"Frankreich",code:"FR",emoji:"\u{1f1eb}\u{1f1f7}"},{name:"Gro\xdfbritannien",code:"GB",emoji:"\u{1f1ec}\u{1f1e7}"},{name:"Italien",code:"IT",emoji:"\u{1f1ee}\u{1f1f9}"},{name:"Japan",code:"JP",emoji:"\u{1f1ef}\u{1f1f5}"},{name:"Kanada",code:"CA",emoji:"\u{1f1e8}\u{1f1e6}"},{name:"\xd6sterreich",code:"AT",emoji:"\u{1f1e6}\u{1f1f9}"},{name:"Schweiz",code:"CH",emoji:"\u{1f1e8}\u{1f1ed}"},{name:"Spanien",code:"ES",emoji:"\u{1f1ea}\u{1f1f8}"},{name:"USA",code:"US",emoji:"\u{1f1fa}\u{1f1f8}"}].filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.code.toLowerCase().includes(e.toLowerCase()));return(0,A.of)(i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Kn=c(8359);class Qn extends Kn.yU{constructor(n,e){super()}schedule(n,e=0){return this}}const Y={setInterval(t,n,...e){const{delegate:r}=Y;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=Y;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var er=c(7908);const xt={now:()=>(xt.delegate||Date).now(),delegate:void 0};class R{constructor(n,e=R.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}}R.now=xt.now;const rr=new class nr extends R{constructor(n,e=R.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}}(class tr extends Qn{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,r=0){return Y.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Y.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i,r=!1;try{this.work(n)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,er.o)(r,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}});var Et=c(9974),ir=c(3669);function ar(t,n){return t===n}var kt=c(8141),lr=c(5558);function ur(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){a.eBV(e);const i=o.XpG();return a.Njj(i.clearSearch())}),a.qSk(),o.j41(1,"svg",11),o.nrm(2,"path",12),o.k0s()()}}function cr(t,n){1&t&&o.nrm(0,"div",13)}function dr(t,n){1&t&&(o.j41(0,"div",17),o.EFF(1," Keine Ergebnisse gefunden "),o.k0s())}function hr(t,n){if(1&t){const e=o.RV6();o.j41(0,"div",18),o.bIt("click",function(){const i=a.eBV(e).$implicit,s=o.XpG(2);return a.Njj(s.selectResult(i))}),o.j41(1,"span",19),o.EFF(2),o.k0s(),o.j41(3,"span",20),o.EFF(4),o.k0s()()}if(2&t){const e=n.$implicit;o.R7$(2),o.JRh(e.emoji),o.R7$(2),o.JRh(e.name)}}function fr(t,n){if(1&t&&(o.j41(0,"div",14),o.DNE(1,dr,2,0,"div",15)(2,hr,5,2,"div",16),o.k0s()),2&t){const e=n.ngIf,r=o.XpG();o.R7$(),o.Y8G("ngIf",0===e.length&&r.searchControl.value&&!r.isLoading),o.R7$(),o.Y8G("ngForOf",e)}}let pr=(()=>{class t{constructor(){this.search=new a.bkB,this.clear=new a.bkB,this.mockDataService=(0,a.WQX)(Ft),this.searchControl=new ve(""),this.showResults=!1,this.isLoading=!1,this.results$=this.searchControl.valueChanges.pipe(function or(t,n=rr){return(0,Et.N)((e,r)=>{let i=null,s=null,l=null;const u=()=>{if(i){i.unsubscribe(),i=null;const d=s;s=null,r.next(d)}};function g(){const d=l+t,v=n.now();if(v<d)return i=this.schedule(void 0,d-v),void r.add(i);u()}e.subscribe((0,K._)(r,d=>{s=d,l=n.now(),i||(i=n.schedule(g,t),r.add(i))},()=>{u(),r.complete()},void 0,()=>{s=i=null}))})}(300),function sr(t,n=ir.D){return t=t??ar,(0,Et.N)((e,r)=>{let i,s=!0;e.subscribe((0,K._)(r,l=>{const u=n(l);(s||!t(i,u))&&(s=!1,i=u,r.next(l))}))})}(),(0,kt.M)(()=>this.isLoading=!0),(0,lr.n)(e=>!e||e.length<2?(this.isLoading=!1,(0,A.of)([])):this.mockDataService.searchLocations(e).pipe((0,kt.M)(()=>this.isLoading=!1))))}clearSearch(){this.searchControl.setValue(""),this.showResults=!1,this.clear.emit()}selectResult(e){this.searchControl.setValue(e.name,{emitEvent:!1}),this.showResults=!1,this.search.emit(e.name)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-map-navbar"]],outputs:{search:"search",clear:"clear"},decls:12,vars:10,consts:[[1,"absolute","top-6","left-6","z-30","w-[420px]"],[1,"relative","group/search","bg-[#1a1c1e]/90","border","border-gray-700/30","rounded-2xl","shadow-2xl","backdrop-blur-xl","transition-all","duration-300","overflow-hidden"],[1,"flex","items-center","px-4","py-3","gap-3"],[1,"flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-gray-400","group-focus-within/search:text-white","transition-colors"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","placeholder","Land oder Region suchen",1,"block","w-full","bg-transparent","border-none","text-[15px]","placeholder-gray-500","text-white","focus:outline-none","focus:ring-0","shadow-none","transition-all",3,"focus","formControl"],["class","p-1 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",3,"click",4,"ngIf"],["class","absolute bottom-0 left-0 h-[1.5px] bg-[#4ade80] animate-pulse w-full",4,"ngIf"],["class","bg-[#1a1c1e]/90 border-x border-b border-gray-700/30 rounded-b-2xl shadow-2xl backdrop-blur-xl overflow-y-auto max-h-[400px] absolute w-full left-0 top-full",4,"ngIf"],[1,"p-1","hover:bg-white/10","rounded-full","transition-colors","text-gray-400","hover:text-white",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M6 18L18 6M6 6l12 12"],[1,"absolute","bottom-0","left-0","h-[1.5px]","bg-[#4ade80]","animate-pulse","w-full"],[1,"bg-[#1a1c1e]/90","border-x","border-b","border-gray-700/30","rounded-b-2xl","shadow-2xl","backdrop-blur-xl","overflow-y-auto","max-h-[400px]","absolute","w-full","left-0","top-full"],["class","p-6 text-center text-gray-400 text-sm",4,"ngIf"],["class","flex items-center px-5 py-4 gap-4 hover:bg-white/5 cursor-pointer transition-colors border-t border-gray-800/50 first:border-0 group/item",3,"click",4,"ngFor","ngForOf"],[1,"p-6","text-center","text-gray-400","text-sm"],[1,"flex","items-center","px-5","py-4","gap-4","hover:bg-white/5","cursor-pointer","transition-colors","border-t","border-gray-800/50","first:border-0","group/item",3,"click"],[1,"text-xl","filter","drop-shadow-sm","group-hover/item:scale-110","transition-transform"],[1,"text-[15px]","font-medium","text-gray-200","group-hover/item:text-white","transition-colors"]],template:function(r,i){if(1&r&&(o.j41(0,"div",0)(1,"div",1),o.nI1(2,"async"),o.j41(3,"div",2)(4,"div",3),a.qSk(),o.j41(5,"svg",4),o.nrm(6,"path",5),o.k0s()(),a.joV(),o.j41(7,"input",6),o.bIt("focus",function(){return i.showResults=!0}),o.k0s(),o.DNE(8,ur,3,0,"button",7),o.k0s(),o.DNE(9,cr,1,0,"div",8),o.k0s(),o.DNE(10,fr,3,2,"div",9),o.nI1(11,"async"),o.k0s()),2&r){let s;o.R7$(),o.AVh("rounded-b-none",i.showResults&&(null==(s=o.bMT(2,6,i.results$))?null:s.length)),o.R7$(6),o.Y8G("formControl",i.searchControl),o.R7$(),o.Y8G("ngIf",i.searchControl.value),o.R7$(),o.Y8G("ngIf",i.isLoading),o.R7$(),o.Y8G("ngIf",i.showResults&&o.bMT(11,8,i.results$))}},dependencies:[p.MD,p.Sq,p.bT,Yn,N,Je,ye,p.Jj],encapsulation:2})}}return t})(),gr=(()=>{class t{constructor(){this.zoomIn=new a.bkB,this.zoomOut=new a.bkB,this.openSettings=new a.bkB}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-map-settings"]],outputs:{zoomIn:"zoomIn",zoomOut:"zoomOut",openSettings:"openSettings"},decls:12,vars:0,consts:[[1,"absolute","top-6","right-6","z-20","flex","flex-col","items-center","space-y-4"],[1,"w-10","h-10","bg-gray-800/90","hover:bg-gray-700","text-white","rounded-lg","border","border-gray-700","flex","items-center","justify-center","shadow-lg","backdrop-blur-sm","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex","flex-col","bg-gray-800/90","rounded-lg","border","border-gray-700","shadow-lg","backdrop-blur-sm","overflow-hidden"],[1,"w-10","h-10","hover:bg-gray-700","text-white","flex","items-center","justify-center","border-b","border-gray-700","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"],[1,"w-10","h-10","hover:bg-gray-700","text-white","flex","items-center","justify-center","transition-colors",3,"click"],["fill-rule","evenodd","d","M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z","clip-rule","evenodd"]],template:function(r,i){1&r&&(o.rj2(0,"div",0)(1,"button",1),o.VwU("click",function(){return i.openSettings.emit()}),a.qSk(),o.rj2(2,"svg",2),o.Hgh(3,"path",3)(4,"path",4),o.eux()(),a.joV(),o.rj2(5,"div",5)(6,"button",6),o.VwU("click",function(){return i.zoomIn.emit()}),a.qSk(),o.rj2(7,"svg",7),o.Hgh(8,"path",8),o.eux()(),a.joV(),o.rj2(9,"button",9),o.VwU("click",function(){return i.zoomOut.emit()}),a.qSk(),o.rj2(10,"svg",7),o.Hgh(11,"path",10),o.eux()()()())},dependencies:[p.MD],encapsulation:2})}}return t})(),St=(()=>{class t{constructor(){this.GRADIENT=["#469C76","#EAB308","#F97316","#7F1D1D","#1c1917"],this.NO_DATA="#374151"}getColor(e){return null==e?this.NO_DATA:e<=20?this.GRADIENT[0]:e<=40?this.GRADIENT[1]:e<=60?this.GRADIENT[2]:e<=80?this.GRADIENT[3]:this.GRADIENT[4]}getLegendData(){return[{label:"0 g",color:this.GRADIENT[0]},{label:"",color:this.GRADIENT[1]},{label:"600 g",color:this.GRADIENT[2]},{label:"",color:this.GRADIENT[3]},{label:"1200+ g",color:this.GRADIENT[4]}]}getGradientColors(){return this.GRADIENT}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function mr(t,n){if(1&t&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&t){const e=n.$implicit;o.R7$(),o.JRh(e)}}let vr=(()=>{class t{constructor(e){this.colorService=e,this.config={title:"Pollution",unit:"AQI",labels:["Low","Med","High"]},this.gradientStyle=""}ngOnInit(){const e=this.colorService.getGradientColors();this.gradientStyle=`linear-gradient(to right, ${e.join(", ")})`}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(St))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-map-legend"]],inputs:{config:"config"},decls:10,vars:5,consts:[[1,"absolute","bottom-6","right-6","z-20","flex","flex-col","items-end","space-y-2"],[1,"bg-gray-800/90","border","border-gray-700","rounded-xl","px-4","py-3","shadow-xl","backdrop-blur-md"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-xs","font-bold","text-white","tracking-wide"],[1,"text-xs","text-gray-400","font-mono"],[1,"w-64","h-2","rounded-full","mb-1"],[1,"w-64","flex","justify-between","text-[10px]","text-gray-400","font-mono","font-medium"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),o.EFF(4),o.k0s(),o.j41(5,"span",4),o.EFF(6),o.k0s()(),o.nrm(7,"div",5),o.j41(8,"div",6),o.DNE(9,mr,2,1,"span",7),o.k0s()()()),2&r&&(o.R7$(4),o.JRh(i.config.title),o.R7$(2),o.JRh(i.config.unit),o.R7$(),o.xc7("background",i.gradientStyle),o.R7$(2),o.Y8G("ngForOf",i.config.labels))},dependencies:[p.MD,p.Sq],encapsulation:2})}}return t})();var Ot=c(1179);const _r=["track"],yr=["handle"];function br(t,n){1&t&&(o.j41(0,"div",24),a.qSk(),o.j41(1,"svg",25),o.nrm(2,"circle",26)(3,"path",27),o.k0s()())}function Cr(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",30),o.bIt("click",function(){const i=a.eBV(e).$implicit,s=o.XpG(2);return a.Njj(s.selectRange(i.value))}),o.EFF(1),o.k0s()}if(2&t){const e=n.$implicit;o.R7$(),o.SpI(" ",e.label," ")}}function Vr(t,n){if(1&t&&(o.j41(0,"div",28),o.DNE(1,Cr,2,1,"button",29),o.k0s()),2&t){const e=o.XpG();o.R7$(),o.Y8G("ngForOf",e.rangeOptions)}}function wr(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",30),o.bIt("click",function(){const i=a.eBV(e).$implicit,s=o.XpG(2);return a.Njj(s.selectInterval(i.value))}),o.EFF(1),o.k0s()}if(2&t){const e=n.$implicit;o.R7$(),o.SpI(" ",e.label," ")}}function Mr(t,n){if(1&t&&(o.j41(0,"div",31),o.DNE(1,wr,2,1,"button",29),o.k0s()),2&t){const e=o.XpG();o.R7$(),o.Y8G("ngForOf",e.getAvailableIntervals())}}function Ar(t,n){if(1&t&&(o.j41(0,"span",35),o.EFF(1),o.k0s()),2&t){const e=o.XpG().index;o.R7$(),o.SpI(" ",0===e?"Start":8===e?"7. Jan.":""," ")}}function Dr(t,n){if(1&t&&(o.j41(0,"div",32),o.nrm(1,"div",33),o.DNE(2,Ar,2,1,"span",34),o.k0s()),2&t){const e=n.index;o.R7$(2),o.Y8G("ngIf",e%4==0)}}let Fr=(()=>{class t{constructor(e){this.router=e,this.config={range:"live",interval:"15m"},this.dateChange=new a.bkB,this.showRangeMenu=!1,this.showIntervalMenu=!1,this.timelineDate=new Date,this.progress=100,this.isDragging=!1,this.isActive=!1,this.rangeOptions=[{label:"Live",value:"live",allowedIntervals:["15m","1h"]},{label:"Last 24 Hours",value:"24h",allowedIntervals:["15m","1h"]},{label:"Last 30 Days",value:"30d",allowedIntervals:["1d"]},{label:"Last 12 Months",value:"12m",allowedIntervals:["1mo"]},{label:"All Time",value:"all",allowedIntervals:["1y"]}],this.intervalOptions=[{label:"15 Minutes",value:"15m"},{label:"Hourly",value:"1h"},{label:"Daily",value:"1d"},{label:"Monthly",value:"1mo"},{label:"Yearly",value:"1y"}],this.ticks=new Array(48)}ngOnInit(){}ngOnChanges(e){e.config&&(this.progress=100,this.timelineDate=new Date)}toggleRangeMenu(){this.showRangeMenu=!this.showRangeMenu,this.showIntervalMenu=!1}toggleIntervalMenu(){this.showIntervalMenu=!this.showIntervalMenu,this.showRangeMenu=!1}getLabelForRange(e){return this.rangeOptions.find(r=>r.value===e)?.label||e}getLabelForInterval(e){return this.intervalOptions.find(r=>r.value===e)?.label||e}getAvailableIntervals(){const e=this.rangeOptions.find(r=>r.value===this.config.range);return e?this.intervalOptions.filter(r=>e.allowedIntervals.includes(r.value)):this.intervalOptions}selectRange(e){const i=this.rangeOptions.find(s=>s.value===e)?.allowedIntervals[0]||"1h";this.navigate(e,i),this.showRangeMenu=!1}selectInterval(e){this.navigate(this.config.range,e),this.showIntervalMenu=!1}navigate(e,r){this.router.navigate(["map",e,r])}onTrackClick(e){this.isDragging||(this.isActive=!0,this.updateProgressFromEvent(e))}onHandleMouseDown(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!0,this.isActive=!0}onMouseMove(e){this.isDragging&&this.updateProgressFromEvent(e)}onMouseUp(){this.isDragging=!1}onDocumentMouseDown(e){const r=e.target;this.trackRef?.nativeElement.contains(r)||this.handleRef?.nativeElement.contains(r)||(this.isActive=!1)}onDocumentKeyDown(e){if(!this.isActive)return;const r=e.shiftKey?10:2;"ArrowLeft"===e.key?(this.progress=Math.max(0,this.progress-r),this.emitChange()):"ArrowRight"===e.key?(this.progress=Math.min(100,this.progress+r),this.emitChange()):"Escape"===e.key&&(this.isActive=!1)}updateProgressFromEvent(e){if(!this.trackRef)return;const r=this.trackRef.nativeElement.getBoundingClientRect();let s=(e.clientX-r.left)/r.width*100;s=Math.max(0,Math.min(100,s)),this.progress=s,this.emitChange()}emitChange(){this.dateChange.emit(new Date)}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(Ot.Ix))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-map-timeline"]],viewQuery:function(r,i){if(1&r&&o.GBs(_r,5)(yr,5),2&r){let s;o.mGM(s=o.lsd())&&(i.trackRef=s.first),o.mGM(s=o.lsd())&&(i.handleRef=s.first)}},hostBindings:function(r,i){1&r&&o.bIt("mousemove",function(l){return i.onMouseMove(l)},o.EBC)("mouseup",function(){return i.onMouseUp()},o.EBC)("mousedown",function(l){return i.onDocumentMouseDown(l)},o.EBC)("keydown",function(l){return i.onDocumentKeyDown(l)},o.EBC)},inputs:{config:"config"},outputs:{dateChange:"dateChange"},features:[o.OA$],decls:33,vars:20,consts:[["track",""],["handle",""],[1,"absolute","bottom-6","left-6","z-20","md:block","group"],[1,"bg-[#1a1c1e]/90","border","border-gray-700/30","rounded-2xl","p-5","shadow-2xl","backdrop-blur-xl","w-fit","min-w-[480px]","relative","transition-all","duration-300"],[1,"flex","items-start","justify-between","gap-12","mb-8"],[1,"flex","flex-col"],[1,"text-[14px]","font-medium","text-gray-300","leading-tight"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-[20px]","font-bold","text-white","tracking-tight"],["class","flex items-center gap-1.5 ml-1 text-red-500 opacity-80",4,"ngIf"],[1,"flex","items-center","bg-black/40","rounded-xl","p-1","border","border-white/10"],[1,"relative","border-r","border-white/10","last:border-0","px-1"],[1,"text-white","text-sm","font-bold","px-3","py-2","hover:bg-white/5","rounded-lg","flex","items-center","gap-2","transition-colors","whitespace-nowrap","min-w-[100px]","justify-between","group/btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","group-hover/btn:text-white","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M19 11l-7 7-7-7"],["class","absolute bottom-full left-0 mb-3 w-48 bg-[#1a1c1e] border border-gray-700 rounded-xl shadow-2xl overflow-hidden z-50",4,"ngIf"],[1,"relative","px-1"],["class","absolute bottom-full left-0 mb-3 w-40 bg-[#1a1c1e] border border-gray-700 rounded-xl shadow-2xl overflow-hidden z-50",4,"ngIf"],[1,"relative","w-full","h-[6px]","bg-white/10","rounded-full","flex","items-center","select-none","cursor-pointer","mb-8",3,"click"],[1,"absolute","inset-x-0","bottom-[-28px]","flex","justify-between","pointer-events-none","px-1"],["class","flex flex-col items-center",4,"ngFor","ngForOf"],["tabindex","0",1,"absolute","top-1/2","-translate-y-1/2","w-9","h-9","bg-[#1a1c1e]","border-2","rounded-full","shadow-2xl","cursor-grab","active:cursor-grabbing","flex","items-center","justify-center","text-white","z-10","outline-none","focus:ring-4","focus:ring-[#4ade80]/20",2,"transform","translateY(-50%)","transition","none",3,"mousedown"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M8 9l-3 3 3 3m8-6l3 3-3 3"],[1,"flex","items-center","gap-1.5","ml-1","text-red-500","opacity-80"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-5","h-5"],["cx","12","cy","12","r","2","fill","currentColor"],["d","M16.24 7.76a6 6 0 0 1 0 8.48m-8.48 0a6 6 0 0 1 0-8.48m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"],[1,"absolute","bottom-full","left-0","mb-3","w-48","bg-[#1a1c1e]","border","border-gray-700","rounded-xl","shadow-2xl","overflow-hidden","z-50"],["class","w-full text-left px-4 py-2.5 text-sm text-gray-300 hover:bg-white/10 hover:text-white transition-colors border-b border-gray-800 last:border-0 block",3,"click",4,"ngFor","ngForOf"],[1,"w-full","text-left","px-4","py-2.5","text-sm","text-gray-300","hover:bg-white/10","hover:text-white","transition-colors","border-b","border-gray-800","last:border-0","block",3,"click"],[1,"absolute","bottom-full","left-0","mb-3","w-40","bg-[#1a1c1e]","border","border-gray-700","rounded-xl","shadow-2xl","overflow-hidden","z-50"],[1,"flex","flex-col","items-center"],[1,"h-1.5","w-[1.5px]","bg-gray-600/50","mb-1.5"],["class","text-[10px] text-gray-500 font-bold whitespace-nowrap",4,"ngIf"],[1,"text-[10px]","text-gray-500","font-bold","whitespace-nowrap"]],template:function(r,i){if(1&r){const s=o.RV6();o.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),o.EFF(5),o.nI1(6,"date"),o.k0s(),o.j41(7,"div",7)(8,"div",8),o.EFF(9),o.nI1(10,"date"),o.k0s(),o.DNE(11,br,4,0,"div",9),o.k0s()(),o.j41(12,"div",10)(13,"div",11)(14,"button",12),o.bIt("click",function(){return a.eBV(s),a.Njj(i.toggleRangeMenu())}),o.EFF(15),a.qSk(),o.j41(16,"svg",13),o.nrm(17,"path",14),o.k0s()(),o.DNE(18,Vr,2,1,"div",15),o.k0s(),a.joV(),o.j41(19,"div",16)(20,"button",12),o.bIt("click",function(){return a.eBV(s),a.Njj(i.toggleIntervalMenu())}),o.EFF(21),a.qSk(),o.j41(22,"svg",13),o.nrm(23,"path",14),o.k0s()(),o.DNE(24,Mr,2,1,"div",17),o.k0s()()(),a.joV(),o.j41(25,"div",18,0),o.bIt("click",function(u){return a.eBV(s),a.Njj(i.onTrackClick(u))}),o.j41(27,"div",19),o.DNE(28,Dr,3,1,"div",20),o.k0s(),o.j41(29,"div",21,1),o.bIt("mousedown",function(u){return a.eBV(s),a.Njj(i.onHandleMouseDown(u))}),a.qSk(),o.j41(31,"svg",22),o.nrm(32,"path",23),o.k0s()()()()()}2&r&&(o.R7$(5),o.SpI(" ",o.i5U(6,14,i.timelineDate,"d. MMM. y,")," "),o.R7$(4),o.SpI(" ",o.i5U(10,17,i.timelineDate,"HH:mm")," MEZ "),o.R7$(2),o.Y8G("ngIf","live"===i.config.range),o.R7$(4),o.SpI(" ",i.getLabelForRange(i.config.range)," "),o.R7$(3),o.Y8G("ngIf",i.showRangeMenu),o.R7$(3),o.SpI(" ",i.getLabelForInterval(i.config.interval)," "),o.R7$(3),o.Y8G("ngIf",i.showIntervalMenu),o.R7$(4),o.Y8G("ngForOf",i.ticks),o.R7$(),o.xc7("left","calc("+i.progress+"% - "+.36*i.progress+"px)"),o.AVh("border-[#4ade80]",i.isActive)("border-gray-500",!i.isActive))},dependencies:[p.MD,p.Sq,p.bT,Zn,p.vh],encapsulation:2})}}return t})();var xr=c(345);let Er=(()=>{class t{constructor(e,r){this.colorService=e,this.sanitizer=r}renderMap(e,r){const s=(new DOMParser).parseFromString(e,"image/svg+xml");r.forEach(u=>{const d=s.getElementById(`zip-${u.zipCode}`);if(d){const v=this.colorService.getColor(u.score);d.setAttribute("fill",v),d.setAttribute("data-zip",u.zipCode),d.classList.add("map-path")}});const l=(new XMLSerializer).serializeToString(s.documentElement);return this.sanitizer.bypassSecurityTrustHtml(l)}static{this.\u0275fac=function(r){return new(r||t)(a.KVO(St),a.KVO(xr.up))}}static{this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kr=(()=>{class t{constructor(){}highlightZip(e,r=".svg-container"){const i=document.querySelector(r);if(i){this.clearHighlight(r);const s=i.querySelector(`#zip-${e}`);s&&s.classList.add("active-search")}}clearHighlight(e=".svg-container"){const r=document.querySelector(e);r&&r.querySelectorAll(".active-search").forEach(s=>s.classList.remove("active-search"))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Sr=()=>({width:"28rem",closeOnBackdropClick:!0});let Or=(()=>{class t{constructor(e,r,i,s){this.mockData=e,this.mapRenderer=r,this.mapAnimations=i,this.route=s,this.rawSvg=(0,a.vPA)(""),this.pollutionData=(0,a.vPA)([]),this.routeSub=null,this.safeSvgContent=null,this.selectedZip=(0,a.vPA)(null),this.isModalOpen=!1,this.legendConfig={title:"CO\u2082-Intensit\xe4t",unit:"gCO\u2082eq/kWh",labels:["0","300","600","900","1200+"]},this.timelineConfig={range:"live",interval:"15m"}}ngOnInit(){this.mockData.getMunichMapData().subscribe(e=>{this.rawSvg.set(e),this.pollutionData().length>0&&(this.safeSvgContent=this.mapRenderer.renderMap(e,this.pollutionData()))}),this.routeSub=this.route.params.subscribe(e=>{const r=e.range||"live",i=e.interval||"15m";this.timelineConfig={range:r,interval:i},this.fetchDataForTime(r,i,new Date)})}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe()}fetchDataForTime(e,r,i){this.mockData.getPollutionDataByTime(e,r,i).subscribe(s=>{this.pollutionData.set(s);const l=this.rawSvg();l&&(this.safeSvgContent=this.mapRenderer.renderMap(l,s))})}handleDateChange(e){this.timelineConfig&&this.fetchDataForTime(this.timelineConfig.range,this.timelineConfig.interval,e)}handleSearch(e){const r=this.pollutionData().find(i=>i.zipCode===e);r?(this.selectedZip.set(r),this.mapAnimations.highlightZip(e)):(this.selectedZip.set(null),this.mapAnimations.clearHighlight())}handleClearConfig(){this.selectedZip.set(null),this.mapAnimations.clearHighlight()}handleMapClick(e){const i=e.target.getAttribute("data-zip");if(i){const s=this.pollutionData().find(l=>l.zipCode===i);s&&(this.selectedZip.set(s),this.isModalOpen=!0)}}handleZoomIn(){console.log("Zoom In")}handleZoomOut(){console.log("Zoom Out")}handleOpenSettings(){console.log("Settings")}submitReport(){this.isModalOpen=!1,alert("Report submitted for "+this.selectedZip()?.zipCode)}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(Ft),o.rXU(Er),o.rXU(kr),o.rXU(Ot.nX))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-munich-map"]],decls:32,vars:8,consts:[[1,"relative","w-full","h-full","bg-gray-900","border-l","border-gray-800","overflow-hidden","group"],[3,"search","clear"],[1,"w-full","h-full","flex","items-center","justify-center","p-0","m-0","cursor-move"],[1,"w-full","h-full","svg-container","animate-fadeIn",3,"click","innerHTML"],[3,"zoomIn","zoomOut","openSettings"],[3,"config"],[3,"dateChange","config"],[3,"close","isVisible","title","config"],[1,"space-y-4"],[1,"p-3","bg-blue-500/10","border","border-blue-500/20","rounded-lg"],[1,"text-sm","text-blue-200"],[1,"space-y-2"],[1,"text-xs","uppercase","text-gray-500","font-bold","tracking-wider"],[1,"grid","grid-cols-3","gap-2"],[1,"py-2","rounded","bg-gray-700","hover:bg-green-600/20","hover:text-green-400","hover:border-green-500/50","border","border-transparent","transition-all","text-xs","font-bold","text-gray-300"],[1,"py-2","rounded","bg-gray-700","hover:bg-yellow-600/20","hover:text-yellow-400","hover:border-yellow-500/50","border","border-transparent","transition-all","text-xs","font-bold","text-gray-300"],[1,"py-2","rounded","bg-gray-700","hover:bg-red-600/20","hover:text-red-400","hover:border-red-500/50","border","border-transparent","transition-all","text-xs","font-bold","text-gray-300"],["placeholder","Describe what you see...",1,"w-full","bg-gray-950","border","border-gray-700","rounded-lg","p-3","text-white","text-sm","focus:border-gray-500","outline-none","transition-colors","h-24","resize-none"],[1,"flex","justify-end","pt-4"],[1,"w-full","py-3","bg-white","text-black","font-bold","rounded-lg","hover:bg-gray-200","transition-colors","shadow-lg",3,"click"]],template:function(r,i){if(1&r&&(o.j41(0,"div",0)(1,"app-map-navbar",1),o.bIt("search",function(l){return i.handleSearch(l)})("clear",function(){return i.handleClearConfig()}),o.k0s(),o.j41(2,"div",2)(3,"div",3),o.bIt("click",function(l){return i.handleMapClick(l)}),o.k0s()(),o.j41(4,"app-map-settings",4),o.bIt("zoomIn",function(){return i.handleZoomIn()})("zoomOut",function(){return i.handleZoomOut()})("openSettings",function(){return i.handleOpenSettings()}),o.k0s(),o.nrm(5,"app-map-legend",5),o.j41(6,"app-map-timeline",6),o.bIt("dateChange",function(l){return i.handleDateChange(l)}),o.k0s(),o.j41(7,"app-modal",7),o.bIt("close",function(){return i.isModalOpen=!1}),o.j41(8,"div",8)(9,"div",9)(10,"p",10),o.EFF(11,"Reporting pollution data for "),o.j41(12,"strong"),o.EFF(13),o.k0s(),o.EFF(14,"."),o.k0s()(),o.j41(15,"div",11)(16,"label",12),o.EFF(17,"Severity Level"),o.k0s(),o.j41(18,"div",13)(19,"button",14),o.EFF(20,"Low"),o.k0s(),o.j41(21,"button",15),o.EFF(22,"Medium"),o.k0s(),o.j41(23,"button",16),o.EFF(24,"High"),o.k0s()()(),o.j41(25,"div",11)(26,"label",12),o.EFF(27,"Obervation Details"),o.k0s(),o.nrm(28,"textarea",17),o.k0s(),o.j41(29,"div",18)(30,"button",19),o.bIt("click",function(){return i.submitReport()}),o.EFF(31,"Submit Report"),o.k0s()()()()()),2&r){let s,l;o.R7$(3),o.Y8G("innerHTML",i.safeSvgContent,o.npT),o.R7$(2),o.Y8G("config",i.legendConfig),o.R7$(),o.Y8G("config",i.timelineConfig),o.R7$(),o.Y8G("isVisible",i.isModalOpen)("title",(null==(s=i.selectedZip())?null:s.zipCode)+" - Report")("config",o.lJ4(7,Sr)),o.R7$(6),o.JRh(null==(l=i.selectedZip())?null:l.zipCode)}},dependencies:[p.MD,Tt,pr,gr,vr,Fr],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}[_nghost-%COMP%]     .svg-container svg{width:100%;height:100%}[_nghost-%COMP%]     .svg-container path.map-path{transition:all .2s cubic-bezier(.4,0,.2,1);stroke:#ffffff1a;stroke-width:1px}[_nghost-%COMP%]     .svg-container path.map-path:hover{stroke:#fff;stroke-width:2px;filter:brightness(1.2);cursor:pointer}[_nghost-%COMP%]     .svg-container path.active-search{stroke:#fff;stroke-width:3px;filter:drop-shadow(0 0 12px rgba(255,255,255,.5));animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{filter:drop-shadow(0 0 0 rgba(255,255,255,.2));stroke-opacity:1}50%{filter:drop-shadow(0 0 20px rgba(255,255,255,.4));stroke-opacity:.8}to{filter:drop-shadow(0 0 0 rgba(255,255,255,.2));stroke-opacity:1}}"]})}}return t})()}}]);